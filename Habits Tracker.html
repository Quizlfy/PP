<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Habits Tracker - Build Better Habits</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
            background-attachment: fixed;
            min-height: 100vh;
            padding: 15px;
            color: #e2e8f0;
            position: relative;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
            touch-action: pan-y;
        }

        body::before {
            content: '';
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(139, 92, 246, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 80% 80%, rgba(59, 130, 246, 0.1) 0%, transparent 50%);
            animation: gradientShift 15s ease infinite;
            pointer-events: none;
        }

        @keyframes gradientShift {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(10%, 10%); }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        header {
            text-align: center;
            color: white;
            margin-bottom: 25px;
            animation: fadeInDown 0.6s ease;
        }

        header h1 i {
            color: #8b5cf6;
            filter: drop-shadow(0 0 10px rgba(139, 92, 246, 0.5));
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            font-size: clamp(1.8em, 5vw, 2.5em);
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .subtitle {
            font-size: clamp(0.9em, 3vw, 1.1em);
            opacity: 0.9;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
            margin-bottom: 25px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 18px 12px;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3),
                        inset 0 1px 0 rgba(255, 255, 255, 0.1);
            text-align: center;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            animation: fadeInUp 0.6s ease;
            animation-fill-mode: both;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .stat-card:nth-child(1) { animation-delay: 0.1s; }
        .stat-card:nth-child(2) { animation-delay: 0.2s; }
        .stat-card:nth-child(3) { animation-delay: 0.3s; }
        .stat-card:nth-child(4) { animation-delay: 0.4s; }

        .stat-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.5),
                        inset 0 1px 0 rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .stat-number {
            font-size: clamp(2em, 6vw, 2.5em);
            font-weight: bold;
            margin: 10px 0;
        }

        .stat-label {
            color: #94a3b8;
            font-size: clamp(0.75em, 2.5vw, 0.9em);
            line-height: 1.3;
        }

        .stat-card i {
            font-size: 1.5em;
            margin-bottom: 5px;
            opacity: 0.8;
        }

        .good-habit .stat-number {
            color: #34d399;
            text-shadow: 0 0 20px rgba(52, 211, 153, 0.5);
        }

        .good-habit i {
            color: #34d399;
        }

        .bad-habit .stat-number {
            color: #f87171;
            text-shadow: 0 0 20px rgba(248, 113, 113, 0.5);
        }

        .bad-habit i {
            color: #f87171;
        }

        .streak .stat-number {
            color: #fbbf24;
            text-shadow: 0 0 20px rgba(251, 191, 36, 0.5);
        }

        .streak i {
            color: #fbbf24;
        }

        .streak .btn-break-streak {
            margin-top: 10px;
            padding: 6px 12px;
            font-size: 0.75em;
            background: rgba(239, 68, 68, 0.2);
            border-color: rgba(239, 68, 68, 0.4);
            color: #f87171;
        }

        .streak .btn-break-streak:hover {
            background: rgba(239, 68, 68, 0.3);
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3);
        }

        .total-stat .stat-number {
            color: #60a5fa;
            text-shadow: 0 0 20px rgba(96, 165, 250, 0.5);
        }

        .total-stat i {
            color: #60a5fa;
        }

        .main-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(min(100%, 500px), 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .section {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3),
                        inset 0 1px 0 rgba(255, 255, 255, 0.1);
            animation: fadeInUp 0.6s ease;
            animation-fill-mode: both;
        }

        .good-habits {
            animation-delay: 0.5s;
        }

        .bad-habits {
            animation-delay: 0.6s;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            gap: 10px;
            flex-wrap: wrap;
        }

        .section-title {
            font-size: clamp(1.2em, 4vw, 1.5em);
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title i {
            font-size: 0.9em;
        }

        .good-habits .section-title {
            color: #34d399;
            text-shadow: 0 0 20px rgba(52, 211, 153, 0.3);
        }

        .bad-habits .section-title {
            color: #f87171;
            text-shadow: 0 0 20px rgba(248, 113, 113, 0.3);
        }

        .add-habit-form {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .habit-input {
            flex: 1;
            min-width: 200px;
            padding: 14px 16px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            font-size: clamp(0.9em, 3vw, 1em);
            color: #e2e8f0;
            transition: all 0.3s;
        }

        .habit-input::placeholder {
            color: #94a3b8;
        }

        .habit-input:focus {
            outline: none;
            border-color: #8b5cf6;
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.2),
                        inset 0 1px 0 rgba(255, 255, 255, 0.1);
            transform: scale(1.02);
        }

        .btn {
            padding: 14px 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            font-size: clamp(0.85em, 2.8vw, 1em);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2),
                        inset 0 1px 0 rgba(255, 255, 255, 0.1);
            white-space: nowrap;
            color: white;
            position: relative;
            overflow: hidden;
            user-select: none;
            -webkit-user-select: none;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:active {
            transform: scale(0.96);
            transition: transform 0.1s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3),
                        inset 0 1px 0 rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.3);
        }

        /* Mobile: Remove hover, keep active only */
        @media (hover: none) {
            .btn:hover {
                transform: none;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2),
                            inset 0 1px 0 rgba(255, 255, 255, 0.1);
                border-color: rgba(255, 255, 255, 0.2);
            }
        }

        .btn-good {
            background: linear-gradient(135deg, rgba(52, 211, 153, 0.3), rgba(16, 185, 129, 0.3));
            border-color: rgba(52, 211, 153, 0.5);
            color: #34d399;
        }

        .btn-good:hover {
            background: linear-gradient(135deg, rgba(52, 211, 153, 0.4), rgba(16, 185, 129, 0.4));
            box-shadow: 0 8px 25px rgba(52, 211, 153, 0.3),
                        inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        .btn-bad {
            background: linear-gradient(135deg, rgba(248, 113, 113, 0.3), rgba(239, 68, 68, 0.3));
            border-color: rgba(248, 113, 113, 0.5);
            color: #f87171;
        }

        .btn-bad:hover {
            background: linear-gradient(135deg, rgba(248, 113, 113, 0.4), rgba(239, 68, 68, 0.4));
            box-shadow: 0 8px 25px rgba(248, 113, 113, 0.3),
                        inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        .btn-timer {
            background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
            border-color: rgba(96, 165, 250, 0.5);
            color: #60a5fa;
            padding: 8px 16px;
            font-size: 0.9em;
        }

        .btn-timer:hover {
            background: linear-gradient(135deg, rgba(96, 165, 250, 0.4), rgba(59, 130, 246, 0.4));
            box-shadow: 0 8px 25px rgba(96, 165, 250, 0.3),
                        inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        .btn-delete {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.3), rgba(220, 38, 38, 0.3));
            border-color: rgba(239, 68, 68, 0.5);
            color: #f87171;
            padding: 6px 12px;
            font-size: 0.85em;
        }

        .btn-delete:hover {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.4), rgba(220, 38, 38, 0.4));
            box-shadow: 0 8px 25px rgba(239, 68, 68, 0.3);
        }

        .habit-list {
            list-style: none;
        }

        .habit-item {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            padding: 16px;
            margin-bottom: 14px;
            border-radius: 16px;
            border-left: 3px solid;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            animation: slideIn 0.4s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2),
                        inset 0 1px 0 rgba(255, 255, 255, 0.05);
            will-change: transform;
            -webkit-tap-highlight-color: transparent;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .habit-item:active {
            transform: scale(0.98);
            transition: transform 0.1s;
        }

        @media (hover: hover) {
            .habit-item:hover {
                box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3),
                            inset 0 1px 0 rgba(255, 255, 255, 0.1);
                transform: translateX(5px) scale(1.01);
                background: rgba(255, 255, 255, 0.05);
                border-color: rgba(255, 255, 255, 0.2);
            }
        }

        .good-habits .habit-item {
            border-left: 3px solid #34d399;
            box-shadow: -3px 0 10px rgba(52, 211, 153, 0.2),
                        0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .good-habits .habit-item:hover {
            box-shadow: -3px 0 15px rgba(52, 211, 153, 0.3),
                        0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .bad-habits .habit-item {
            border-left: 3px solid #f87171;
            box-shadow: -3px 0 10px rgba(248, 113, 113, 0.2),
                        0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .bad-habits .habit-item:hover {
            box-shadow: -3px 0 15px rgba(248, 113, 113, 0.3),
                        0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .habit-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            gap: 10px;
        }

        .habit-name {
            font-weight: bold;
            font-size: clamp(1em, 3.5vw, 1.1em);
            flex: 1;
            word-break: break-word;
            line-height: 1.3;
        }

        .habit-count {
            font-size: clamp(1.8em, 5vw, 2.2em);
            font-weight: bold;
            margin: 0 10px;
            min-width: 50px;
            text-align: center;
        }

        .good-habits .habit-count {
            color: #34d399;
            text-shadow: 0 0 15px rgba(52, 211, 153, 0.5);
        }

        .bad-habits .habit-count {
            color: #f87171;
            text-shadow: 0 0 15px rgba(248, 113, 113, 0.5);
        }

        .habit-actions {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .habit-timer {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 10px;
            padding: 8px 12px;
            background: rgba(96, 165, 250, 0.1);
            border-radius: 10px;
            border: 1px solid rgba(96, 165, 250, 0.3);
            font-size: 0.9em;
        }

        .habit-timer-display {
            font-weight: bold;
            color: #60a5fa;
            font-variant-numeric: tabular-nums;
            letter-spacing: 0.05em;
            text-shadow: 0 0 10px rgba(96, 165, 250, 0.5);
            min-width: 60px;
        }

        .habit-timer.running {
            background: rgba(52, 211, 153, 0.15);
            border-color: rgba(52, 211, 153, 0.4);
        }

        .habit-timer.running .habit-timer-display {
            color: #34d399;
            text-shadow: 0 0 10px rgba(52, 211, 153, 0.5);
        }

        .habit-timer-btn {
            padding: 4px 10px;
            font-size: 0.8em;
            min-width: 60px;
        }

        .timer-section {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 25px 20px;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3),
                        inset 0 1px 0 rgba(255, 255, 255, 0.1);
            margin-bottom: 25px;
            text-align: center;
            animation: fadeInUp 0.6s ease;
            animation-delay: 0.7s;
            animation-fill-mode: both;
        }

        .timer-section h2 {
            font-size: clamp(1.3em, 4vw, 1.6em);
            margin-bottom: 15px;
            background: linear-gradient(135deg, #60a5fa, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            filter: drop-shadow(0 0 10px rgba(96, 165, 250, 0.3));
        }

        .timer-display {
            font-size: clamp(3em, 12vw, 4.5em);
            font-weight: bold;
            color: #60a5fa;
            margin: 20px 0;
            text-shadow: 0 0 30px rgba(96, 165, 250, 0.8),
                        0 0 60px rgba(96, 165, 250, 0.4);
            font-variant-numeric: tabular-nums;
            letter-spacing: 0.1em;
            background: rgba(15, 23, 42, 0.6);
            padding: 30px 20px;
            border-radius: 20px;
            border: 2px solid rgba(96, 165, 250, 0.4);
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4),
                        inset 0 0 30px rgba(96, 165, 250, 0.1),
                        0 0 50px rgba(96, 165, 250, 0.2);
            position: relative;
            overflow: hidden;
        }

        .timer-display::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(96, 165, 250, 0.1) 0%, transparent 70%);
            animation: timerPulse 3s ease-in-out infinite;
        }

        @keyframes timerPulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.2); opacity: 0.8; }
        }

        .timer-display.running {
            border-color: #34d399;
            color: #34d399;
            text-shadow: 0 0 30px rgba(52, 211, 153, 0.8),
                        0 0 60px rgba(52, 211, 153, 0.4);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4),
                        inset 0 0 30px rgba(52, 211, 153, 0.1),
                        0 0 50px rgba(52, 211, 153, 0.3);
        }

        .timer-display.paused {
            border-color: #fbbf24;
            color: #fbbf24;
            text-shadow: 0 0 30px rgba(251, 191, 36, 0.8),
                        0 0 60px rgba(251, 191, 36, 0.4);
        }

        .timer-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 10px;
        }

        .timer-controls .btn {
            flex: 1;
            min-width: 100px;
            max-width: 150px;
        }

        .timer-presets {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .preset-btn {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #cbd5e1;
            padding: 10px 16px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: clamp(0.8em, 2.5vw, 0.9em);
            font-weight: 600;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2),
                        inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .preset-btn:hover {
            background: rgba(139, 92, 246, 0.3);
            border-color: rgba(139, 92, 246, 0.5);
            color: #c4b5fd;
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(139, 92, 246, 0.3),
                        inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        .preset-btn:active {
            transform: scale(0.95);
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #64748b;
            font-style: italic;
            font-size: clamp(0.9em, 3vw, 1em);
        }

        .delete-all-btn {
            background: rgba(148, 163, 184, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(148, 163, 184, 0.3);
            color: #94a3b8;
            padding: 10px 16px;
            font-size: clamp(0.75em, 2.5vw, 0.85em);
        }

        .delete-all-btn:hover {
            background: rgba(148, 163, 184, 0.3);
            border-color: rgba(148, 163, 184, 0.5);
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            overflow: hidden;
            margin-top: 12px;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #8b5cf6, #a78bfa, #c4b5fd);
            transition: width 0.5s ease;
            box-shadow: 0 0 15px rgba(139, 92, 246, 0.6);
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(255, 255, 255, 0.3) 50%, 
                transparent 100%);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .good-habits .progress-fill {
            background: linear-gradient(90deg, #10b981, #34d399, #6ee7b7);
            box-shadow: 0 0 15px rgba(52, 211, 153, 0.6);
        }

        .bad-habits .progress-fill {
            background: linear-gradient(90deg, #f87171, #fca5a5, #fecaca);
            box-shadow: 0 0 15px rgba(248, 113, 113, 0.6);
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 8px;
            font-size: 0.85em;
            color: #94a3b8;
        }

        .progress-text {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .target-input-container {
            display: flex;
            align-items: center;
            gap: 6px;
            margin-top: 8px;
        }

        .target-input {
            width: 60px;
            padding: 4px 8px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            color: #e2e8f0;
            font-size: 0.85em;
            text-align: center;
        }

        .target-input:focus {
            outline: none;
            border-color: #8b5cf6;
            background: rgba(255, 255, 255, 0.08);
        }

        .set-target-btn {
            padding: 4px 10px;
            font-size: 0.75em;
            min-width: auto;
        }

        /* Enhanced Mobile Responsiveness */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .container {
                padding: 0;
            }

            header {
                margin-bottom: 20px;
            }

            .stats-container {
                gap: 10px;
                grid-template-columns: repeat(2, 1fr);
            }

            .stat-card {
                padding: 16px 10px;
            }

            .main-content {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .section {
                padding: 16px;
            }

            .habit-item {
                padding: 14px;
            }

            .timer-section {
                padding: 20px 15px;
            }

            .timer-controls {
                gap: 8px;
            }

            .timer-presets {
                gap: 6px;
            }

            .preset-btn {
                padding: 10px 12px;
                font-size: 0.8em;
            }

            .add-habit-form {
                flex-direction: column;
            }

            .habit-input {
                width: 100%;
                min-width: 100%;
            }

            .add-habit-form .btn {
                width: 100%;
            }

            .habit-actions {
                gap: 6px;
            }

            .habit-actions .btn {
                min-width: 80px;
                font-size: 0.8em;
                padding: 10px 8px;
            }

            .habit-timer {
                flex-wrap: wrap;
            }
        }

        @media (max-width: 480px) {
            .stats-container {
                grid-template-columns: 1fr 1fr;
            }

            .habit-count {
                font-size: 1.6em;
                min-width: 40px;
            }

            .btn-delete {
                flex: 0 0 auto;
                min-width: 60px;
            }
        }

        /* Smooth scrolling */
        html {
            scroll-behavior: smooth;
        }

        /* Touch-friendly tap areas */
        @media (hover: none) and (pointer: coarse) {
            .btn {
                min-height: 48px;
                padding: 14px 18px;
                font-size: 1em;
            }

            .preset-btn {
                min-height: 48px;
                padding: 12px 18px;
            }

            .habit-input {
                min-height: 52px;
                font-size: 16px; /* Prevents zoom on iOS */
            }

            .target-input {
                min-height: 44px;
                font-size: 16px;
            }

            .habit-timer-btn {
                min-height: 40px;
            }
        }

        /* Smooth momentum scrolling for iOS */
        .modal, .habit-list {
            -webkit-overflow-scrolling: touch;
            overscroll-behavior: contain;
        }

        /* Pull to refresh prevention */
        body {
            overscroll-behavior-y: contain;
        }

        /* Improved touch feedback */
        * {
            -webkit-tap-highlight-color: transparent;
        }

        input, textarea, button, select, a {
            -webkit-tap-highlight-color: rgba(139, 92, 246, 0.2);
        }

        /* Achievement Badge */
        .achievement-badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 4px 10px;
            background: rgba(251, 191, 36, 0.2);
            border: 1px solid rgba(251, 191, 36, 0.4);
            border-radius: 20px;
            font-size: 0.75em;
            color: #fbbf24;
            margin-left: 8px;
            animation: badgePop 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        @keyframes badgePop {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); opacity: 1; }
        }

        /* Confetti animation */
        @keyframes confetti {
            0% { transform: translateY(0) rotateZ(0deg); opacity: 1; }
            100% { transform: translateY(-1000px) rotateZ(720deg); opacity: 0; }
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            z-index: 9999;
            animation: confetti 3s ease-out forwards;
            pointer-events: none;
        }

        /* Quick Actions */
        .quick-actions {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 100;
        }

        @media (max-width: 768px) {
            .quick-actions {
                bottom: 15px;
                right: 15px;
                gap: 8px;
            }
        }

        .fab {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: linear-gradient(135deg, #8b5cf6, #6366f1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 8px 24px rgba(139, 92, 246, 0.4);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
            user-select: none;
            -webkit-user-select: none;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        @media (max-width: 768px) {
            .fab {
                width: 50px;
                height: 50px;
            }
        }

        .fab:active {
            transform: scale(0.9);
            transition: transform 0.1s;
        }

        @media (hover: hover) {
            .fab:hover {
                transform: scale(1.1) rotate(10deg);
                box-shadow: 0 12px 32px rgba(139, 92, 246, 0.6);
            }
        }

        /* Tooltip */
        .tooltip {
            position: absolute;
            right: 70px;
            background: rgba(30, 41, 59, 0.95);
            color: #e2e8f0;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 0.85em;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        @media (hover: hover) {
            .fab:hover .tooltip {
                opacity: 1;
            }
        }

        @media (max-width: 768px) {
            .tooltip {
                display: none;
            }
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            -webkit-overflow-scrolling: touch;
        }

        .modal-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .modal {
            background: rgba(30, 41, 59, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            transform: scale(0.8) translateY(20px);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            -webkit-overflow-scrolling: touch;
            overscroll-behavior: contain;
        }

        .modal-overlay.active .modal {
            transform: scale(1) translateY(0);
        }

        @media (max-width: 768px) {
            .modal {
                padding: 20px;
                width: 95%;
                max-height: 85vh;
                border-radius: 16px;
            }
        }

        .modal-header {
            font-size: 1.5em;
            margin-bottom: 20px;
            color: #8b5cf6;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: #e2e8f0;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            user-select: none;
            -webkit-user-select: none;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }

        .modal-close:active {
            transform: scale(0.9);
            transition: transform 0.1s;
        }

        @media (hover: hover) {
            .modal-close:hover {
                background: rgba(255, 255, 255, 0.2);
                transform: rotate(90deg);
            }
        }

        @media (max-width: 768px) {
            .modal-close {
                width: 40px;
                height: 40px;
                top: 10px;
                right: 10px;
            }
        }

        .achievement-list {
            display: grid;
            gap: 15px;
        }

        .achievement-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 12px;
            border-left: 3px solid;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .achievement-item.unlocked {
            border-color: #34d399;
        }

        .achievement-item.locked {
            border-color: #64748b;
            opacity: 0.5;
        }

        .achievement-icon {
            font-size: 2em;
            min-width: 50px;
            text-align: center;
        }

        .achievement-details h3 {
            margin: 0 0 5px 0;
            color: #e2e8f0;
        }

        .achievement-details p {
            margin: 0;
            font-size: 0.85em;
            color: #94a3b8;
        }

        /* Summary styles */
        .summary-section {
            margin-bottom: 20px;
        }

        .summary-section h3 {
            color: #8b5cf6;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .summary-card {
            background: rgba(255, 255, 255, 0.05);
            padding: 12px;
            border-radius: 10px;
            margin-bottom: 10px;
            border-left: 3px solid;
        }

        .summary-card.good {
            border-color: #34d399;
        }

        .summary-card.bad {
            border-color: #f87171;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 5px 0;
            font-size: 0.9em;
        }

        .summary-label {
            color: #94a3b8;
        }

        .summary-value {
            color: #e2e8f0;
            font-weight: bold;
        }

        .summary-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .summary-stat {
            background: rgba(139, 92, 246, 0.2);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid rgba(139, 92, 246, 0.3);
        }

        .summary-stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #8b5cf6;
            margin: 5px 0;
        }

        .summary-stat-label {
            font-size: 0.85em;
            color: #94a3b8;
        }

        /* Loading spinner */
        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #8b5cf6;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Keyboard shortcut indicator */
        .kbd {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            padding: 2px 6px;
            font-size: 0.75em;
            font-family: monospace;
            color: #cbd5e1;
            margin-left: 8px;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(30, 41, 59, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 16px 20px;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5),
                        inset 0 1px 0 rgba(255, 255, 255, 0.1);
            z-index: 1000;
            animation: slideInRight 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            max-width: 320px;
            font-size: clamp(0.9em, 3vw, 1em);
            color: #e2e8f0;
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(120px) scale(0.8);
            }
            to {
                opacity: 1;
                transform: translateX(0) scale(1);
            }
        }

        .notification.success {
            border-left: 3px solid #34d399;
            box-shadow: -3px 0 15px rgba(52, 211, 153, 0.3),
                        0 10px 40px rgba(0, 0, 0, 0.5);
        }

        .notification.info {
            border-left: 3px solid #60a5fa;
            box-shadow: -3px 0 15px rgba(96, 165, 250, 0.3),
                        0 10px 40px rgba(0, 0, 0, 0.5);
        }

        @media (max-width: 768px) {
            .notification {
                top: 10px;
                right: 10px;
                left: 10px;
                max-width: none;
                padding: 14px 16px;
                font-size: 0.9em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-bullseye"></i> Habits Tracker</h1>
            <p class="subtitle">Build better habits, one day at a time</p>
        </header>

        <div class="stats-container">
            <div class="stat-card good-habit">
                <i class="fas fa-check-circle"></i>
                <div class="stat-label">Good Habits Completed</div>
                <div class="stat-number" id="totalGoodCount">0</div>
            </div>
            <div class="stat-card bad-habit">
                <i class="fas fa-ban"></i>
                <div class="stat-label">Bad Habits Resisted</div>
                <div class="stat-number" id="totalBadCount">0</div>
            </div>
            <div class="stat-card streak">
                <i class="fas fa-fire"></i>
                <div class="stat-label">Current Streak</div>
                <div class="stat-number" id="currentStreak">0</div>
                <button class="btn btn-break-streak" onclick="breakStreak()">
                    <i class="fas fa-chain-broken"></i> Break Streak
                </button>
            </div>
            <div class="stat-card total-stat">
                <i class="fas fa-chart-line"></i>
                <div class="stat-label">Total Activities</div>
                <div class="stat-number" id="totalActivities">0</div>
            </div>
        </div>

        <div class="timer-section">
            <h2><i class="fas fa-clock"></i> Focus Timer</h2>
            <div class="timer-display" id="timerDisplay">00:00</div>
            <div class="timer-controls">
                <button class="btn btn-timer" onclick="startTimer()"><i class="fas fa-play"></i> Start</button>
                <button class="btn btn-timer" onclick="pauseTimer()"><i class="fas fa-pause"></i> Pause</button>
                <button class="btn btn-timer" onclick="resetTimer()"><i class="fas fa-redo"></i> Reset</button>
            </div>
            <div class="timer-presets">
                <button class="preset-btn" onclick="setTimer(5)">5 min</button>
                <button class="preset-btn" onclick="setTimer(15)">15 min</button>
                <button class="preset-btn" onclick="setTimer(25)">25 min (Pomodoro)</button>
                <button class="preset-btn" onclick="setTimer(45)">45 min</button>
                <button class="preset-btn" onclick="setTimer(60)">1 hour</button>
            </div>
        </div>

        <div class="main-content">
            <div class="section good-habits">
                <div class="section-header">
                    <h2 class="section-title"><i class="fas fa-heart"></i> Good Habits</h2>
                    <button class="btn delete-all-btn" onclick="deleteAllHabits('good')"><i class="fas fa-trash-alt"></i> Clear All</button>
                </div>
                <div class="add-habit-form">
                    <input type="text" class="habit-input" id="goodHabitInput" placeholder="Add a good habit (e.g., Exercise, Read, Meditate)">
                    <button class="btn btn-good" onclick="addHabit('good')"><i class="fas fa-plus"></i> Add</button>
                </div>
                <ul class="habit-list" id="goodHabitsList"></ul>
            </div>

            <div class="section bad-habits">
                <div class="section-header">
                    <h2 class="section-title"><i class="fas fa-times-circle"></i> Bad Habits</h2>
                    <button class="btn delete-all-btn" onclick="deleteAllHabits('bad')"><i class="fas fa-trash-alt"></i> Clear All</button>
                </div>
                <div class="add-habit-form">
                    <input type="text" class="habit-input" id="badHabitInput" placeholder="Add a bad habit to resist (e.g., Smoking, Junk Food)">
                    <button class="btn btn-bad" onclick="addHabit('bad')"><i class="fas fa-plus"></i> Add</button>
                </div>
                <ul class="habit-list" id="badHabitsList"></ul>
            </div>
        </div>

        <!-- Quick Actions FAB -->
        <div class="quick-actions">
            <button class="fab" onclick="showAchievements()" title="View Achievements">
                <i class="fas fa-trophy"></i>
                <span class="tooltip">Achievements <span class="kbd">A</span></span>
            </button>
            <button class="fab" onclick="scrollToTop()" title="Scroll to Top">
                <i class="fas fa-arrow-up"></i>
                <span class="tooltip">Scroll to Top <span class="kbd">T</span></span>
            </button>
            <button class="fab" onclick="showDailySummary()" title="Daily Summary">
                <i class="fas fa-chart-pie"></i>
                <span class="tooltip">Daily Summary <span class="kbd">S</span></span>
            </button>
        </div>

        <!-- Achievements Modal -->
        <div class="modal-overlay" id="achievementsModal">
            <div class="modal">
                <button class="modal-close" onclick="closeModal('achievementsModal')">
                    <i class="fas fa-times"></i>
                </button>
                <div class="modal-header">
                    <i class="fas fa-trophy"></i>
                    Achievements
                </div>
                <div class="achievement-list" id="achievementsList"></div>
            </div>
        </div>

        <!-- Daily Summary Modal -->
        <div class="modal-overlay" id="summaryModal">
            <div class="modal">
                <button class="modal-close" onclick="closeModal('summaryModal')">
                    <i class="fas fa-times"></i>
                </button>
                <div class="modal-header">
                    <i class="fas fa-chart-pie"></i>
                    Daily Summary
                </div>
                <div id="summaryContent"></div>
            </div>
        </div>
    </div>

    <script>
        // Data storage
        let goodHabits = [];
        let badHabits = [];
        let timerInterval = null;
        let timerSeconds = 0;
        let timerRunning = false;
        let habitTimers = {}; // Store individual habit timers
        let achievements = {
            firstStep: { unlocked: false, name: "First Step", desc: "Complete your first habit", icon: "üéØ" },
            dedication: { unlocked: false, name: "Dedication", desc: "Reach a 7-day streak", icon: "üî•" },
            century: { unlocked: false, name: "Century", desc: "Complete 100 total activities", icon: "üíØ" },
            warrior: { unlocked: false, name: "Habit Warrior", desc: "Track 10 different habits", icon: "‚öîÔ∏è" },
            perfectDay: { unlocked: false, name: "Perfect Day", desc: "Complete all daily targets in one day", icon: "‚ú®" },
            marathon: { unlocked: false, name: "Marathon", desc: "30-day streak", icon: "üèÜ" }
        };

        // Load data from localStorage on page load
        function loadData() {
            const savedGoodHabits = localStorage.getItem('goodHabits');
            const savedBadHabits = localStorage.getItem('badHabits');
            const savedStreak = localStorage.getItem('currentStreak');
            const savedAchievements = localStorage.getItem('achievements');
            
            if (savedGoodHabits) goodHabits = JSON.parse(savedGoodHabits);
            if (savedBadHabits) badHabits = JSON.parse(savedBadHabits);
            if (savedStreak) document.getElementById('currentStreak').textContent = savedStreak;
            if (savedAchievements) achievements = JSON.parse(savedAchievements);
            
            updateDisplay();
            checkAchievements();
        }

        // Save data to localStorage
        function saveData() {
            localStorage.setItem('goodHabits', JSON.stringify(goodHabits));
            localStorage.setItem('badHabits', JSON.stringify(badHabits));
            localStorage.setItem('achievements', JSON.stringify(achievements));
        }

        // Add a new habit
        function addHabit(type) {
            const inputId = type === 'good' ? 'goodHabitInput' : 'badHabitInput';
            const input = document.getElementById(inputId);
            const habitName = input.value.trim();
            
            if (habitName === '') {
                showNotification('Please enter a habit name', 'info');
                return;
            }
            
            const habit = {
                id: Date.now(),
                name: habitName,
                count: 0,
                dailyTarget: 1,
                createdAt: new Date().toISOString(),
                lastUpdated: new Date().toISOString()
            };
            
            if (type === 'good') {
                goodHabits.push(habit);
                showNotification(`Good habit "${habitName}" added! üéâ`, 'success');
            } else {
                badHabits.push(habit);
                showNotification(`Bad habit "${habitName}" added to resist! üí™`, 'success');
            }
            
            input.value = '';
            saveData();
            updateDisplay();
        }

        // Calculate dynamic target based on days
        function getDynamicTarget(habit) {
            const daysSince = Math.floor((new Date() - new Date(habit.createdAt)) / (1000 * 60 * 60 * 24));
            const daysActive = daysSince + 1; // Include today
            const dailyTarget = habit.dailyTarget || 1;
            return daysActive * dailyTarget;
        }

        // Set daily target for habit
        function setDailyTarget(type, id) {
            const habits = type === 'good' ? goodHabits : badHabits;
            const habit = habits.find(h => h.id === id);
            const inputValue = document.getElementById(`target-input-${type}-${id}`).value;
            const dailyTarget = parseInt(inputValue);
            
            if (habit && dailyTarget > 0) {
                habit.dailyTarget = dailyTarget;
                saveData();
                updateDisplay();
                const daysSince = Math.floor((new Date() - new Date(habit.createdAt)) / (1000 * 60 * 60 * 24)) + 1;
                const totalTarget = daysSince * dailyTarget;
                showNotification(`Daily target set to ${dailyTarget}! Total target now: ${totalTarget} üéØ`, 'success');
            }
        }

        // Increment habit count
        function incrementHabit(type, id) {
            const habits = type === 'good' ? goodHabits : badHabits;
            const habit = habits.find(h => h.id === id);
            
            if (habit) {
                habit.count++;
                habit.lastUpdated = new Date().toISOString();
                
                // Check if goal reached
                const target = getDynamicTarget(habit);
                if (habit.count === target) {
                    createConfetti();
                    showNotification(`üéâ Goal reached for "${habit.name}"! Amazing work!`, 'success');
                } else {
                    showNotification(`Great job! Keep it up! üåü`, 'success');
                }
                
                saveData();
                updateDisplay();
                updateStreak();
                checkAchievements();
            }
        }

        // Decrement habit count
        function decrementHabit(type, id) {
            const habits = type === 'good' ? goodHabits : badHabits;
            const habit = habits.find(h => h.id === id);
            
            if (habit && habit.count > 0) {
                habit.count--;
                habit.lastUpdated = new Date().toISOString();
                saveData();
                updateDisplay();
            }
        }

        // Delete a habit
        function deleteHabit(type, id) {
            if (confirm('Are you sure you want to delete this habit?')) {
                if (type === 'good') {
                    goodHabits = goodHabits.filter(h => h.id !== id);
                } else {
                    badHabits = badHabits.filter(h => h.id !== id);
                }
                saveData();
                updateDisplay();
                showNotification('Habit deleted', 'info');
            }
        }

        // Delete all habits of a type
        function deleteAllHabits(type) {
            if (confirm(`Are you sure you want to delete all ${type} habits?`)) {
                if (type === 'good') {
                    goodHabits = [];
                } else {
                    badHabits = [];
                }
                saveData();
                updateDisplay();
                showNotification(`All ${type} habits cleared`, 'info');
            }
        }

        // Update the display
        function updateDisplay() {
            updateHabitsList('good');
            updateHabitsList('bad');
            updateStats();
        }

        // Update habits list
        function updateHabitsList(type) {
            const listId = type === 'good' ? 'goodHabitsList' : 'badHabitsList';
            const list = document.getElementById(listId);
            const habits = type === 'good' ? goodHabits : badHabits;
            
            if (habits.length === 0) {
                list.innerHTML = '<div class="empty-state">No habits yet. Add one to get started!</div>';
                return;
            }
            
            list.innerHTML = habits.map(habit => {
                const daysSince = Math.floor((new Date() - new Date(habit.createdAt)) / (1000 * 60 * 60 * 24));
                const daysActive = daysSince + 1;
                const timerRunning = isHabitTimerRunning(type, habit.id);
                const dailyTarget = habit.dailyTarget || 1;
                const target = getDynamicTarget(habit);
                const progress = Math.min((habit.count / target) * 100, 100);
                const isCompleted = habit.count >= target;
                const behindSchedule = habit.count < target;
                
                return `
                    <li class="habit-item">
                        <div class="habit-header">
                            <span class="habit-name">${habit.name} ${isCompleted ? 'üéâ' : behindSchedule && habit.count > 0 ? '‚è∞' : ''}</span>
                            <span class="habit-count">${habit.count}</span>
                        </div>
                        <div class="habit-actions">
                            <button class="btn ${type === 'good' ? 'btn-good' : 'btn-bad'}" onclick="incrementHabit('${type}', ${habit.id})">
                                <i class="fas fa-check"></i> ${type === 'good' ? 'Done' : 'Resisted'}
                            </button>
                            <button class="btn btn-timer" onclick="decrementHabit('${type}', ${habit.id})"><i class="fas fa-minus"></i> Undo</button>
                            <button class="btn btn-delete" onclick="deleteHabit('${type}', ${habit.id})"><i class="fas fa-trash"></i></button>
                        </div>
                        <div class="habit-timer ${timerRunning ? 'running' : ''}">
                            <i class="fas fa-stopwatch"></i>
                            <span class="habit-timer-display" id="habit-timer-${type}-${habit.id}">00:00</span>
                            <button class="btn btn-timer habit-timer-btn" onclick="${timerRunning ? 'stopHabitTimer' : 'startHabitTimer'}('${type}', ${habit.id})">
                                <i class="fas fa-${timerRunning ? 'stop' : 'play'}"></i> ${timerRunning ? 'Stop' : 'Start'}
                            </button>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${progress}%"></div>
                        </div>
                        <div class="progress-info">
                            <span class="progress-text">
                                <i class="fas fa-chart-bar"></i> ${habit.count} / ${target}
                            </span>
                            <span style="color: ${isCompleted ? '#34d399' : behindSchedule ? '#fbbf24' : '#94a3b8'}">
                                ${isCompleted ? '‚úì On Track!' : `${Math.round(progress)}%`}
                            </span>
                        </div>
                        <div class="target-input-container">
                            <label style="font-size: 0.85em; color: #94a3b8;">
                                <i class="fas fa-bullseye"></i> Daily Target:
                            </label>
                            <input type="number" 
                                   class="target-input" 
                                   id="target-input-${type}-${habit.id}" 
                                   value="${dailyTarget}" 
                                   min="1"
                                   max="100">
                            <button class="btn btn-timer set-target-btn" onclick="setDailyTarget('${type}', ${habit.id})">
                                <i class="fas fa-check"></i> Set
                            </button>
                        </div>
                        <small style="color: #64748b; margin-top: 8px; display: block;">
                            <i class="fas fa-calendar"></i> Day ${daysActive} ‚Ä¢ ${dailyTarget} per day = ${target} total target
                        </small>
                    </li>
                `;
            }).join('');
        }

        // Update statistics
        function updateStats() {
            const totalGood = goodHabits.reduce((sum, habit) => sum + habit.count, 0);
            const totalBad = badHabits.reduce((sum, habit) => sum + habit.count, 0);
            const totalActivities = totalGood + totalBad;
            
            document.getElementById('totalGoodCount').textContent = totalGood;
            document.getElementById('totalBadCount').textContent = totalBad;
            document.getElementById('totalActivities').textContent = totalActivities;
        }

        // Update streak
        function updateStreak() {
            const streakEl = document.getElementById('currentStreak');
            let streak = parseInt(streakEl.textContent);
            streak++;
            streakEl.textContent = streak;
            localStorage.setItem('currentStreak', streak);
        }

        // Break streak function
        function breakStreak() {
            if (confirm('Are you sure you want to break your streak? This cannot be undone.')) {
                document.getElementById('currentStreak').textContent = '0';
                localStorage.setItem('currentStreak', '0');
                showNotification('Streak reset. Start fresh tomorrow! üí™', 'info');
            }
        }

        // Timer functions
        function setTimer(minutes) {
            timerSeconds = minutes * 60;
            updateTimerDisplay();
        }

        function startTimer() {
            if (timerRunning) return;
            
            if (timerSeconds === 0) {
                setTimer(25); // Default to 25 minutes
            }
            
            timerRunning = true;
            document.getElementById('timerDisplay').classList.add('running');
            document.getElementById('timerDisplay').classList.remove('paused');
            
            timerInterval = setInterval(() => {
                if (timerSeconds > 0) {
                    timerSeconds--;
                    updateTimerDisplay();
                } else {
                    pauseTimer();
                    showNotification('Timer complete! Great work! üéâ', 'success');
                    playNotificationSound();
                }
            }, 1000);
        }

        function pauseTimer() {
            timerRunning = false;
            clearInterval(timerInterval);
            document.getElementById('timerDisplay').classList.remove('running');
            if (timerSeconds > 0) {
                document.getElementById('timerDisplay').classList.add('paused');
            }
        }

        function resetTimer() {
            pauseTimer();
            timerSeconds = 0;
            updateTimerDisplay();
            document.getElementById('timerDisplay').classList.remove('running', 'paused');
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timerSeconds / 60);
            const seconds = timerSeconds % 60;
            document.getElementById('timerDisplay').textContent = 
                `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }

        // Habit timer functions
        function startHabitTimer(type, id) {
            const key = `${type}-${id}`;
            if (habitTimers[key]) return; // Already running
            
            let seconds = 0;
            habitTimers[key] = setInterval(() => {
                seconds++;
                updateHabitTimerDisplay(type, id, seconds);
            }, 1000);
            
            updateDisplay();
        }

        function stopHabitTimer(type, id) {
            const key = `${type}-${id}`;
            if (habitTimers[key]) {
                clearInterval(habitTimers[key]);
                const seconds = getHabitTimerSeconds(type, id);
                delete habitTimers[key];
                updateDisplay();
                
                if (seconds > 0) {
                    const minutes = Math.floor(seconds / 60);
                    showNotification(`Time tracked: ${minutes}m ${seconds % 60}s! Great job! üéØ`, 'success');
                }
            }
        }

        function updateHabitTimerDisplay(type, id, seconds) {
            const element = document.getElementById(`habit-timer-${type}-${id}`);
            if (element) {
                const minutes = Math.floor(seconds / 60);
                const secs = seconds % 60;
                element.textContent = `${String(minutes).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
            }
        }

        function getHabitTimerSeconds(type, id) {
            const element = document.getElementById(`habit-timer-${type}-${id}`);
            if (element) {
                const [minutes, seconds] = element.textContent.split(':').map(Number);
                return minutes * 60 + seconds;
            }
            return 0;
        }

        function isHabitTimerRunning(type, id) {
            return !!habitTimers[`${type}-${id}`];
        }

        function playNotificationSound() {
            // Create a simple beep sound
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = 800;
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.5);
        }

        // Show notification
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Handle Enter key in input fields
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('goodHabitInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') addHabit('good');
            });
            
            document.getElementById('badHabitInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') addHabit('bad');
            });
            
            loadData();
        });

        // Achievements System
        function checkAchievements() {
            const totalGood = goodHabits.reduce((sum, habit) => sum + habit.count, 0);
            const totalBad = badHabits.reduce((sum, habit) => sum + habit.count, 0);
            const totalActivities = totalGood + totalBad;
            const streak = parseInt(document.getElementById('currentStreak').textContent);
            const totalHabits = goodHabits.length + badHabits.length;

            // First Step
            if (!achievements.firstStep.unlocked && totalActivities >= 1) {
                unlockAchievement('firstStep');
            }

            // Dedication (7-day streak)
            if (!achievements.dedication.unlocked && streak >= 7) {
                unlockAchievement('dedication');
            }

            // Century (100 activities)
            if (!achievements.century.unlocked && totalActivities >= 100) {
                unlockAchievement('century');
            }

            // Warrior (10 habits)
            if (!achievements.warrior.unlocked && totalHabits >= 10) {
                unlockAchievement('warrior');
            }

            // Marathon (30-day streak)
            if (!achievements.marathon.unlocked && streak >= 30) {
                unlockAchievement('marathon');
            }

            saveData();
        }

        function unlockAchievement(key) {
            achievements[key].unlocked = true;
            const ach = achievements[key];
            showNotification(`üèÜ Achievement Unlocked: ${ach.name}!`, 'success');
            createConfetti();
        }

        function showAchievements() {
            const modal = document.getElementById('achievementsModal');
            const list = document.getElementById('achievementsList');
            
            list.innerHTML = Object.entries(achievements).map(([key, ach]) => `
                <div class="achievement-item ${ach.unlocked ? 'unlocked' : 'locked'}">
                    <div class="achievement-icon">${ach.icon}</div>
                    <div class="achievement-details">
                        <h3>${ach.name} ${ach.unlocked ? '‚úì' : 'üîí'}</h3>
                        <p>${ach.desc}</p>
                    </div>
                </div>
            `).join('');
            
            modal.classList.add('active');
        }

        function closeModal(id) {
            document.getElementById(id).classList.remove('active');
        }

        // Confetti effect
        function createConfetti() {
            const colors = ['#8b5cf6', '#34d399', '#60a5fa', '#fbbf24', '#f87171'];
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * window.innerWidth + 'px';
                    confetti.style.top = window.innerHeight + 'px';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 0.3 + 's';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 30);
            }
        }

        // Quick actions
        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function showDailySummary() {
            const modal = document.getElementById('summaryModal');
            const content = document.getElementById('summaryContent');
            
            const totalGood = goodHabits.reduce((sum, habit) => sum + habit.count, 0);
            const totalBad = badHabits.reduce((sum, habit) => sum + habit.count, 0);
            const streak = parseInt(document.getElementById('currentStreak').textContent);
            
            // Calculate today's progress
            const today = new Date().toISOString().split('T')[0];
            let todayGood = 0;
            let todayBad = 0;
            
            goodHabits.forEach(habit => {
                if (habit.lastUpdated && habit.lastUpdated.split('T')[0] === today) {
                    todayGood++;
                }
            });
            
            badHabits.forEach(habit => {
                if (habit.lastUpdated && habit.lastUpdated.split('T')[0] === today) {
                    todayBad++;
                }
            });
            
            // Check habits on track
            let onTrackCount = 0;
            let behindCount = 0;
            
            [...goodHabits, ...badHabits].forEach(habit => {
                const target = getDynamicTarget(habit);
                if (habit.count >= target) {
                    onTrackCount++;
                } else {
                    behindCount++;
                }
            });
            
            content.innerHTML = `
                <div class="summary-section">
                    <h3><i class="fas fa-calendar-day"></i> Today's Activity</h3>
                    <div class="summary-stats">
                        <div class="summary-stat">
                            <div class="summary-stat-value" style="color: #34d399;">${todayGood}</div>
                            <div class="summary-stat-label">Good Habits</div>
                        </div>
                        <div class="summary-stat">
                            <div class="summary-stat-value" style="color: #f87171;">${todayBad}</div>
                            <div class="summary-stat-label">Bad Resisted</div>
                        </div>
                    </div>
                </div>
                
                <div class="summary-section">
                    <h3><i class="fas fa-chart-line"></i> Overall Progress</h3>
                    <div class="summary-card" style="border-color: #8b5cf6;">
                        <div class="summary-row">
                            <span class="summary-label">Total Good Habits Completed</span>
                            <span class="summary-value" style="color: #34d399;">${totalGood}</span>
                        </div>
                        <div class="summary-row">
                            <span class="summary-label">Total Bad Habits Resisted</span>
                            <span class="summary-value" style="color: #f87171;">${totalBad}</span>
                        </div>
                        <div class="summary-row">
                            <span class="summary-label">Current Streak</span>
                            <span class="summary-value" style="color: #fbbf24;">${streak} days üî•</span>
                        </div>
                        <div class="summary-row">
                            <span class="summary-label">Total Activities</span>
                            <span class="summary-value" style="color: #60a5fa;">${totalGood + totalBad}</span>
                        </div>
                    </div>
                </div>
                
                <div class="summary-section">
                    <h3><i class="fas fa-bullseye"></i> Target Status</h3>
                    <div class="summary-stats">
                        <div class="summary-stat" style="background: rgba(52, 211, 153, 0.2); border-color: rgba(52, 211, 153, 0.3);">
                            <div class="summary-stat-value" style="color: #34d399;">${onTrackCount}</div>
                            <div class="summary-stat-label">On Track ‚úì</div>
                        </div>
                        <div class="summary-stat" style="background: rgba(251, 191, 36, 0.2); border-color: rgba(251, 191, 36, 0.3);">
                            <div class="summary-stat-value" style="color: #fbbf24;">${behindCount}</div>
                            <div class="summary-stat-label">Behind ‚è∞</div>
                        </div>
                    </div>
                </div>
                
                <div class="summary-section">
                    <h3><i class="fas fa-star"></i> Top Habits</h3>
                    ${[...goodHabits, ...badHabits]
                        .sort((a, b) => b.count - a.count)
                        .slice(0, 5)
                        .map((habit, index) => {
                            const type = goodHabits.includes(habit) ? 'good' : 'bad';
                            return `
                                <div class="summary-card ${type}">
                                    <div class="summary-row">
                                        <span class="summary-label">${index + 1}. ${habit.name}</span>
                                        <span class="summary-value">${habit.count} times</span>
                                    </div>
                                </div>
                            `;
                        }).join('') || '<p style="color: #94a3b8; text-align: center;">No habits tracked yet</p>'}
                </div>
                
                <div style="text-align: center; margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1);">
                    <p style="color: #94a3b8; font-size: 0.85em;">
                        <i class="fas fa-heart"></i> Keep up the great work!
                    </p>
                </div>
            `;
            
            modal.classList.add('active');
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            // Alt + A: Show achievements
            if (e.altKey && e.key === 'a') {
                e.preventDefault();
                showAchievements();
            }
            
            // Alt + T: Scroll to top
            if (e.altKey && e.key === 't') {
                e.preventDefault();
                scrollToTop();
            }
            
            // Alt + S: Show daily summary
            if (e.altKey && e.key === 's') {
                e.preventDefault();
                showDailySummary();
            }
            
            // Escape: Close modals
            if (e.key === 'Escape') {
                closeModal('achievementsModal');
                closeModal('summaryModal');
            }
        });

        // Close modal on outside click
        document.querySelectorAll('.modal-overlay').forEach(overlay => {
            overlay.addEventListener('click', function(e) {
                if (e.target === overlay) {
                    overlay.classList.remove('active');
                }
            });
        });

        // Add haptic feedback for mobile (if supported)
        function addHapticFeedback() {
            if ('vibrate' in navigator) {
                navigator.vibrate(10);
            }
        }

        // Enhanced button interactions for mobile
        document.addEventListener('DOMContentLoaded', function() {
            // Add touch feedback to all buttons
            const buttons = document.querySelectorAll('.btn, .fab, .preset-btn');
            buttons.forEach(button => {
                button.addEventListener('touchstart', function() {
                    addHapticFeedback();
                    this.style.transform = 'scale(0.95)';
                }, { passive: true });
                
                button.addEventListener('touchend', function() {
                    this.style.transform = '';
                }, { passive: true });
            });

            // Smooth scroll for stat cards on mobile
            const statCards = document.querySelectorAll('.stat-card');
            statCards.forEach(card => {
                card.addEventListener('touchstart', function() {
                    this.style.transform = 'scale(0.97)';
                }, { passive: true });
                
                card.addEventListener('touchend', function() {
                    this.style.transform = '';
                }, { passive: true });
            });

            // Prevent accidental zooming on double tap for buttons
            let lastTouchEnd = 0;
            document.addEventListener('touchend', function(event) {
                const now = Date.now();
                if (now - lastTouchEnd <= 300) {
                    if (event.target.matches('.btn, .fab, .stat-card, .habit-item')) {
                        event.preventDefault();
                    }
                }
                lastTouchEnd = now;
            }, false);
        });
    </script>
</body>
</html>
